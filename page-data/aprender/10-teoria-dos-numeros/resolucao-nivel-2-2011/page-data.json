{"componentChunkName":"component---src-pages-aprender-10-teoria-dos-numeros-markdown-remark-frontmatter-slug-tsx","path":"/aprender/10-teoria-dos-numeros/resolucao-nivel-2-2011/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"OBI - Modalidade Programação (Nível 1) - Fase 2 - 2011","description":"Balé (Contagem de Inversões)","author":"Vinicius Lima"},"html":"<h3 id=\"balé-contagem-de-inversões\" style=\"position:relative;\"><a href=\"#bal%C3%A9-contagem-de-invers%C3%B5es\" aria-label=\"balé contagem de inversões permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Balé (Contagem de Inversões)</h3>\n<p>Uma academia possui $N$ bailarinas. O dono quer escolher uma dupla onde:</p>\n<ol>\n<li>Uma bailarina é <strong>mais antiga</strong> na academia que a outra.</li>\n<li>A bailarina mais antiga deve ter <strong>habilidade maior</strong> que a mais nova.</li>\n</ol>\n<p>A entrada fornece a lista de habilidades em <strong>ordem cronológica</strong> (da mais antiga para a mais nova). Seu objetivo é contar quantos pares $(i, j)$ existem tal que $i &#x3C; j$ (índice da primeira é menor que o da segunda) e $\\text{Habilidade}[i] > \\text{Habilidade}[j]$.</p>\n<blockquote>\n<p>Em Ciência da Computação, esse problema é conhecido como <strong>Contagem de Inversões</strong> de um <em>array</em>.</p>\n</blockquote>\n<p><strong>Entrada</strong></p>\n<p>A primeira linha contém um inteiro $N$. A segunda linha contém $N$ inteiros representando as habilidades das bailarinas, em ordem de chegada.</p>\n<p><strong>Saída</strong></p>\n<p>Um único inteiro representando o número de duplas válidas.</p>\n<p><strong>Restrições</strong></p>\n<ul>\n<li>$1 \\leq N \\leq 100,000$</li>\n<li>Habilidades distintas entre 1 e $100,000$.</li>\n</ul>\n<p><strong>Exemplos</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Entrada</th>\n<th align=\"left\">Saída</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">5<br>1 5 2 4 3</td>\n<td align=\"left\">4</td>\n</tr>\n<tr>\n<td align=\"left\">9<br>9 8 7 6 5 4 3 1 2</td>\n<td align=\"left\">35</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"solução\" style=\"position:relative;\"><a href=\"#solu%C3%A7%C3%A3o\" aria-label=\"solução permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solução</h3>\n<p>Uma verificação de todos os pares possíveis (abordagem ingênua) teria complexidade $O(N^2)$, o que é muito lento para $N = 100,000$. Para garantir a eficiência exigida pelas restrições de $N$, utilizamos o algoritmo <strong>Merge Sort modificado</strong>.</p>\n<p>A complexidade final do algoritmo será $O(N \\log N)$.</p>\n<h4 id=\"lógica-de-contagem-no-merge-sort\" style=\"position:relative;\"><a href=\"#l%C3%B3gica-de-contagem-no-merge-sort\" aria-label=\"lógica de contagem no merge sort permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lógica de Contagem no Merge Sort</h4>\n<p>O Merge Sort divide o vetor ao meio recursivamente e depois intercala (une) as partes ordenadas. Durante a etapa de <strong>intercalação (merge)</strong> de duas metades (Esquerda e Direita) já ordenadas, podemos contar as inversões:</p>\n<ol>\n<li>Se o elemento atual da <strong>Esquerda</strong> $(\\text{E}[i])$ for menor ou igual ao elemento da <strong>Direita</strong> $(\\text{D}[j])$, ele é copiado para o vetor temporário normalmente.</li>\n<li>Se o elemento atual da <strong>Esquerda</strong> $(\\text{E}[i])$ for <strong>maior</strong> que o elemento atual da <strong>Direita</strong> $(\\text{D}[j])$, isso constitui uma inversão.\n<ul>\n<li>Como a metade Esquerda já está ordenada, se $\\text{E}[i] > \\text{D}[j]$, então todos os elementos subsequentes na metade Esquerda (de $i$ até o final) também são maiores que $\\text{D}[j]$.</li>\n<li>Portanto, adicionamos à resposta o número de elementos restantes na metade esquerda, calculado por: <strong>(TamanhoEsquerda − i)</strong>.</li>\n</ul>\n</li>\n</ol>\n<p><strong>Código em JavaScript (com Fast I/O):</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// --- FAST I/O para leitura eficiente de grandes inputs ---</span>\n<span class=\"token keyword\">const</span> buffer <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> bufferIdx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">readInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">&lt;</span> buffer<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> bufferIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">>=</span> buffer<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">&lt;</span> buffer<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        res <span class=\"token operator\">=</span> res <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">48</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">solve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> valN <span class=\"token operator\">=</span> <span class=\"token function\">readInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>valN <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">N</span> <span class=\"token operator\">=</span> valN<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Int32Array</span><span class=\"token punctuation\">(</span><span class=\"token constant\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token constant\">N</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">readInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Array auxiliar global para o Merge Sort (evita alocacao de memoria excessiva)</span>\n    <span class=\"token keyword\">const</span> temp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Int32Array</span><span class=\"token punctuation\">(</span><span class=\"token constant\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> inversions <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Funcao de Merge (Intercalacao)</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">left<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">,</span> right</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> left<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Indice inicio esquerda</span>\n        <span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Indice inicio direita</span>\n        <span class=\"token keyword\">let</span> k <span class=\"token operator\">=</span> left<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Indice temp</span>\n\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;=</span> mid <span class=\"token operator\">&amp;&amp;</span> j <span class=\"token operator\">&lt;=</span> right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                temp<span class=\"token punctuation\">[</span>k<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// Se arr[i] > arr[j], eh uma INVERSAO.</span>\n                <span class=\"token comment\">// Quantidade = (mid + 1) - i</span>\n                inversions <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span>mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                temp<span class=\"token punctuation\">[</span>k<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Copia restantes da esquerda</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;=</span> mid<span class=\"token punctuation\">)</span> temp<span class=\"token punctuation\">[</span>k<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Copia restantes da direita</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">&lt;=</span> right<span class=\"token punctuation\">)</span> temp<span class=\"token punctuation\">[</span>k<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Copia de volta para o array original</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> left<span class=\"token punctuation\">;</span> x <span class=\"token operator\">&lt;=</span> right<span class=\"token punctuation\">;</span> x<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            arr<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Merge Sort Recursivo</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">left<span class=\"token punctuation\">,</span> right</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">&lt;</span> right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>left <span class=\"token operator\">+</span> right<span class=\"token punctuation\">)</span> <span class=\"token operator\">>>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Divisao inteira por 2</span>\n            <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">N</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>inversions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">solve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<h2 id=\"title-obi---modalidade-programação-nível-1---fase-2---2011description-calculadora-multiplicação-e-divisão-por-fatores-primosslug-obi-2011-fase2-programacao-nivel1-calculadoraauthor-vinicius-lima\" style=\"position:relative;\"><a href=\"#title-obi---modalidade-programa%C3%A7%C3%A3o-n%C3%ADvel-1---fase-2---2011description-calculadora-multiplica%C3%A7%C3%A3o-e-divis%C3%A3o-por-fatores-primosslug-obi-2011-fase2-programacao-nivel1-calculadoraauthor-vinicius-lima\" aria-label=\"title obi   modalidade programação nível 1   fase 2   2011description calculadora multiplicação e divisão por fatores primosslug obi 2011 fase2 programacao nivel1 calculadoraauthor vinicius lima permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>title: \"OBI - Modalidade Programação (Nível 1) - Fase 2 - 2011\"\ndescription: \"Calculadora (Multiplicação e Divisão por Fatores Primos)\"\nslug: \"obi-2011-fase2-programacao-nivel1-calculadora\"\nauthor: \"Vinicius Lima\"</h2>\n<h3 id=\"calculadora\" style=\"position:relative;\"><a href=\"#calculadora\" aria-label=\"calculadora permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculadora</h3>\n<p>A organização SBC inspeciona calculadoras que realizam apenas <strong>multiplicação</strong> (<code>*</code>) e <strong>divisão</strong> (<code>/</code>) por números de um <strong>único dígito</strong> (1 a 9). A calculadora inicia com o valor <strong>1</strong>. Uma sequência de $N$ operações é fornecida.</p>\n<p>Apesar de a entrada ser limitada a um dígito, o visor pode exibir números fracionários ou muito grandes durante o processo. No entanto, é garantido que o <strong>resultado final é um número inteiro</strong> que cabe em uma variável padrão (até $2^{30}$).</p>\n<p>Sua tarefa é processar as operações e imprimir o resultado final.</p>\n<p><strong>Entrada</strong></p>\n<p>A primeira linha contém um inteiro $N$. As próximas $N$ linhas contêm um dígito e um caractere (<code>*</code> ou <code>/</code>).</p>\n<p><strong>Saída</strong></p>\n<p>Uma única linha com o resultado inteiro final.</p>\n<p><strong>Restrições</strong></p>\n<ul>\n<li>$1 \\leq N \\leq 100,000$</li>\n<li>Resultado final $\\leq 2^{30}$.</li>\n</ul>\n<p><strong>Exemplos</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Entrada</th>\n<th align=\"left\">Saída</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">3<br>2 *<br>1 *<br>3 *</td>\n<td align=\"left\">6</td>\n</tr>\n<tr>\n<td align=\"left\">3<br>2 /<br>3 /<br>6 *</td>\n<td align=\"left\">1</td>\n</tr>\n<tr>\n<td align=\"left\">11<br>9 *<br>... (9x)<br>9 /</td>\n<td align=\"left\">387420489</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"solução-1\" style=\"position:relative;\"><a href=\"#solu%C3%A7%C3%A3o-1\" aria-label=\"solução 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solução</h3>\n<p>A simulação direta das operações usando números de ponto flutuante (<code>double</code>) é arriscada devido a possíveis <strong>erros de precisão</strong>, o que comprometeria o resultado final, que deve ser exato. Usar inteiros gigantes (<code>BigInt</code>) para numerador e denominador seria computacionalmente custoso para $N=100,000$.</p>\n<p>A melhor abordagem é utilizar a <strong>fatoração prima</strong> dos números de 1 a 9. Como todos os dígitos de entrada são pequenos, seus fatores primos são apenas: <strong>2, 3, 5 e 7</strong>.</p>\n<p>Manteremos um contador para o expoente de cada um desses primos. O resultado final $R$ é dado por:\n$$R = 2^{c_2} \\cdot 3^{c_3} \\cdot 5^{c_5} \\cdot 7^{c_7}$$</p>\n<h4 id=\"lógica-de-processamento\" style=\"position:relative;\"><a href=\"#l%C3%B3gica-de-processamento\" aria-label=\"lógica de processamento permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lógica de Processamento</h4>\n<ul>\n<li><strong>Multiplicação por X (<code>*</code>):</strong> Adicionamos os fatores primos de $X$ aos respectivos contadores.</li>\n<li><strong>Divisão por X (<code>/</code>):</strong> Subtraímos os fatores primos de $X$ dos respectivos contadores.</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Dígito ($X$)</th>\n<th align=\"center\">Fatoração Prima</th>\n<th align=\"center\">Contadores ($c_2, c_3, c_5, c_7$)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\">Neutro</td>\n<td align=\"center\">$(0, 0, 0, 0)$</td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">$2^1$</td>\n<td align=\"center\">$(1, 0, 0, 0)$</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">$3^1$</td>\n<td align=\"center\">$(0, 1, 0, 0)$</td>\n</tr>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"center\">$2^2$</td>\n<td align=\"center\">$(2, 0, 0, 0)$</td>\n</tr>\n<tr>\n<td align=\"center\">5</td>\n<td align=\"center\">$5^1$</td>\n<td align=\"center\">$(0, 0, 1, 0)$</td>\n</tr>\n<tr>\n<td align=\"center\">6</td>\n<td align=\"center\">$2^1 \\cdot 3^1$</td>\n<td align=\"center\">$(1, 1, 0, 0)$</td>\n</tr>\n<tr>\n<td align=\"center\">7</td>\n<td align=\"center\">$7^1$</td>\n<td align=\"center\">$(0, 0, 0, 1)$</td>\n</tr>\n<tr>\n<td align=\"center\">8</td>\n<td align=\"center\">$2^3$</td>\n<td align=\"center\">$(3, 0, 0, 0)$</td>\n</tr>\n<tr>\n<td align=\"center\">9</td>\n<td align=\"center\">$3^2$</td>\n<td align=\"center\">$(0, 2, 0, 0)$</td>\n</tr>\n</tbody>\n</table>\n<p>Como o resultado final é garantido ser inteiro e $\\leq 2^{30}$, esta abordagem garante um cálculo <strong>exato</strong> e eficiente ($O(N)$).</p>\n<p>[Image of prime factorization for small numbers]</p>\n<p><strong>Código em JavaScript (com Fast I/O):</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// --- FAST I/O para leitura eficiente de grandes inputs ---</span>\n<span class=\"token keyword\">const</span> buffer <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> bufferIdx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">readInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">&lt;</span> buffer<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> bufferIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">>=</span> buffer<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">&lt;</span> buffer<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        res <span class=\"token operator\">=</span> res <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">48</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Funcao auxiliar para ler o operador (* ou /)</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">readChar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">&lt;</span> buffer<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> bufferIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bufferIdx <span class=\"token operator\">>=</span> buffer<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> buffer<span class=\"token punctuation\">[</span>bufferIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Retorna o codigo ASCII</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">solve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> valN <span class=\"token operator\">=</span> <span class=\"token function\">readInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>valN <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">N</span> <span class=\"token operator\">=</span> valN<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Contadores para os expoentes dos primos 2, 3, 5, 7</span>\n    <span class=\"token keyword\">let</span> p2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> p3 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> p5 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> p7 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token constant\">N</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> val <span class=\"token operator\">=</span> <span class=\"token function\">readInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> op <span class=\"token operator\">=</span> <span class=\"token function\">readChar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 42 is '*', 47 is '/'</span>\n        \n        <span class=\"token comment\">// Determina o sinal: +1 se multiplicar, -1 se dividir</span>\n        <span class=\"token keyword\">const</span> sign <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>op <span class=\"token operator\">===</span> <span class=\"token number\">42</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Atualiza os contadores baseados na fatoracao do digito val</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p2 <span class=\"token operator\">+=</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p3 <span class=\"token operator\">+=</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p2 <span class=\"token operator\">+=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p5 <span class=\"token operator\">+=</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p2 <span class=\"token operator\">+=</span> sign<span class=\"token punctuation\">;</span> p3 <span class=\"token operator\">+=</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p7 <span class=\"token operator\">+=</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p2 <span class=\"token operator\">+=</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val <span class=\"token operator\">===</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> p3 <span class=\"token operator\">+=</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> sign<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// val === 1 nao faz nada</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Reconstroi o resultado</span>\n    <span class=\"token comment\">// Como o resultado final cabe em 2^30, Math.pow e a multiplicacao</span>\n    <span class=\"token comment\">// sao seguras em JavaScript sem perda de precisao.</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> p3<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> p5<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> p7<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">solve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>"}},"pageContext":{"id":"4c04bd39-38f5-5aa3-ac8f-781aca9a7f64","frontmatter__slug":"resolucao-nivel-2-2011","__params":{"frontmatter__slug":"resolucao-nivel-2-2011"}}},"staticQueryHashes":["3159585216"],"slicesMap":{}}