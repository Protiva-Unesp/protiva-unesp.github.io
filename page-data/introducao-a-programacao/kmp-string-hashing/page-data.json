{"componentChunkName":"component---src-pages-introducao-a-programacao-markdown-remark-frontmatter-slug-tsx","path":"/introducao-a-programacao/kmp-string-hashing/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"01 - Strings: KMP e String Hashing","description":"Problemas utilizando Strings","author":"Pedro Henrique Paiola, Rene Pegoraro, Wilson M Yonezawa, Arissa Yoshida, Nicolas Barbosa Gomes, Luis Henrique Morelli"},"html":"<h3 id=\"strings-em-programaÃ§Ã£o-competitiva\" style=\"position:relative;\"><a href=\"#strings-em-programa%C3%A7%C3%A3o-competitiva\" aria-label=\"strings em programaÃ§Ã£o competitiva permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Strings em ProgramaÃ§Ã£o Competitiva</h3>\n<ul>\n<li>Existem diversos problemas clÃ¡ssicos associados a Strings. Nesta aula trataremos sobre dois problemas especÃ­ficos:</li>\n<li>Busca em Strings / String matching</li>\n<li>Substrings palindrÃ´micas</li>\n</ul>\n<h3 id=\"busca-em-strings\" style=\"position:relative;\"><a href=\"#busca-em-strings\" aria-label=\"busca em strings permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Busca em strings</h3>\n<ul>\n<li>\n<p>O problema substring search/pattern search/string matching consiste em encontrar uma dada string dentro de outra.</p>\n</li>\n<li>\n<p>Exemplo:</p>\n<ul>\n<li>S = â€œQue a ForÃ§a esteja com vocÃªâ€</li>\n<li>P = â€œForÃ§aâ€</li>\n</ul>\n</li>\n<li>\n<p>O problema substring search ou pattern search consiste em encontrar uma dada string dentro de outra.</p>\n</li>\n<li>\n<p>Exemplo:</p>\n<ul>\n<li>S = â€œQue a <strong>ForÃ§a</strong> esteja com vocÃªâ€</li>\n<li>P = â€œForÃ§aâ€</li>\n</ul>\n</li>\n<li>\n<p>OcorrÃªncias: 6 (posiÃ§Ã£o)</p>\n</li>\n<li>\n<p>O problema substring search ou pattern search consiste em encontrar uma dada string dentro de outra.</p>\n</li>\n<li>\n<p>Exemplo:</p>\n<ul>\n<li>S = â€œ<strong>aaba</strong>acaadaabaabaâ€</li>\n<li>S = â€œaabaacaad<strong>aaba</strong>abaâ€</li>\n<li>S = â€œaabaacaadaab<strong>aaba</strong>â€</li>\n<li>P = â€œaabaâ€</li>\n</ul>\n</li>\n<li>\n<p>OcorrÃªncias: 0, 9 e 12</p>\n</li>\n<li>\n<p>O problema substring search ou pattern search consiste em encontrar uma dada string dentro de outra.</p>\n</li>\n<li>\n<p>Exemplo:</p>\n<ul>\n<li>S = â€œaabaacaadaab<strong>aaba</strong>â€</li>\n<li>P = â€œaabaâ€</li>\n</ul>\n</li>\n<li>\n<p>OcorrÃªncias: 0, 9 e 12</p>\n</li>\n<li>\n<p>Algoritmo ingÃªnuo</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>string S<span class=\"token punctuation\">,</span> string P<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> S<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> P<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> P<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> P<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> P<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Esse algoritmo, no pior caso, tem complexidade ğ‘‚(ğ‘š. ğ‘›), fazendo ğ‘š. ğ‘› comparaÃ§Ãµes. PorÃ©m, em geral, ele nÃ£o chega a realizar tantas comparaÃ§Ãµes.</li>\n<li>Usar esse algoritmo Ã© bastante razoÃ¡vel para vÃ¡rios casos, principalmente quando as strings nÃ£o sÃ£o muito grandes.</li>\n<li>Mas, existem algoritmos de busca de substrings mais eficientes, que podem ser necessÃ¡rios em algumas situaÃ§Ãµes, como exemplo temos o KMP</li>\n</ul>\n<h3 id=\"alguns-conceitos\" style=\"position:relative;\"><a href=\"#alguns-conceitos\" aria-label=\"alguns conceitos permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Alguns conceitos</h3>\n<ul>\n<li>Prefixo de uma string S Ã© a string obtida apÃ³s a remoÃ§Ã£o de 0 ou mais caracteres do fim de S.</li>\n<li>â€œaâ€, â€œadcâ€, â€œadcbaaâ€ sÃ£o prefixos de â€œadcbaaâ€</li>\n<li>Sufixo de uma string S Ã© a string obtida apÃ³s a remoÃ§Ã£o de 0 ou mais carateres do inÃ­cio de S.</li>\n<li>â€œaâ€, â€œbaaâ€, â€œadcbaaâ€ sÃ£o sufixos de â€œadcbaaâ€</li>\n<li>Prefixo/sufixo prÃ³prio de S Ã© um prefixo/sufixo de S que Ã© diferente de S.</li>\n<li>Substring de uma string S Ã© uma string obtida apÃ³s a remoÃ§Ã£o de 0 ou mais caracteres no inÃ­cio ou no fim de S.</li>\n<li>â€œaâ€, â€œcbaâ€, â€œadcâ€, â€œdcbaâ€, â€œadcbaaâ€ sÃ£o substrings de â€œadcbaaâ€</li>\n</ul>\n<h3 id=\"kmp\" style=\"position:relative;\"><a href=\"#kmp\" aria-label=\"kmp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KMP</h3>\n<ul>\n<li>\n<p>Knuth Morrit Pratt</p>\n</li>\n<li>\n<p>Complexidade: ğ‘‚(ğ‘› + ğ‘š) no pior caso</p>\n</li>\n<li>\n<p>No algoritmo ingÃªnuo, sempre que detectamos caracteres diferentes, avanÃ§Ã¡vamos um caracter na string principal (i++) e testamos toda a substring, desde o comeÃ§o (comeÃ§ando sempre com j = 0).</p>\n</li>\n<li>\n<p>O KMP, porÃ©m, aproveita as comparaÃ§Ãµes que foram feitas antes de encontrar dois caracteres diferentes, evitando comparar novamente caracteres que jÃ¡ sabemos que sÃ£o compatÃ­veis.</p>\n</li>\n<li>\n<p>A principal ideia deste algoritmo Ã© prÃ©-processar o padrÃ£o P, de modo a obter um vetor de inteiros lps, que conta o nÃºmero de caracteres que podem ser â€œignoradosâ€ em uma nova comparaÃ§Ã£o.</p>\n</li>\n<li>\n<p>O nome lps refere-se Ã  â€œlongest proper prefix and suffixâ€, ou seja, o maior prefixo prÃ³prio (nÃ£o pode ser a prÃ³pria palavra) que tambÃ©m Ã© sufixo.</p>\n</li>\n<li>\n<p>Conhecido tambÃ©m como funÃ§Ã£o de prefixo.</p>\n</li>\n<li>\n<p>Confira a GIF abaixo:</p>\n</li>\n</ul>\n<p><img src=\"/static/gif1-20eb39bb98c5b5bdf764f4eca504545d.gif\" alt=\"img1-img11\"></p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span>MAX<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">,</span> m<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">char</span> S<span class=\"token punctuation\">[</span>MAX<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> P<span class=\"token punctuation\">[</span>MAX<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">calculatePrefix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>j <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> P<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> P<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j <span class=\"token operator\">=</span> a<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> j<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nvector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token function\">KMP2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> <span class=\"token comment\">//retorna todas as ocorrÃªncias da substring</span>\n    vector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> resp<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">calculatePrefix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>j <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> S<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> P<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            j <span class=\"token operator\">=</span> a<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        i<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">==</span> m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            resp<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">-</span> m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            j <span class=\"token operator\">=</span> a<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> resp<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>SugestÃ£o para entender mais sobre o KMP e suas aplicaÃ§Ãµes:\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=RXISWaGmYW8\">Algoritmo de KMP | VÃ­deo do Bruno Monteiro</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"string-hashing\" style=\"position:relative;\"><a href=\"#string-hashing\" aria-label=\"string hashing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>String Hashing</h3>\n<ul>\n<li>Uma tÃ©cnica bastante interessante e relativamente simples de se utilizar Ã© a de String Hashing.</li>\n<li>Primeiramente, vamos revisar, de forma muito intuitiva, o conceito de Hashing.</li>\n</ul>\n<h3 id=\"hashing\" style=\"position:relative;\"><a href=\"#hashing\" aria-label=\"hashing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hashing</h3>\n<ul>\n<li>Podemos pensar em uma problema de busca da seguinte forma:</li>\n<li>Considere um conjunto de chaves ğ¾ e um conjunto de valores ğ‘‰, de forma que cada chave ğ‘˜ estÃ¡ associada a um Ãºnico valor ğ‘£ (ğ‘šğ‘ğ‘[ğ‘˜] = ğ‘£).</li>\n<li>Dado um valor ğ‘ qualquer, encontrar a chave ğ‘˜ a qual ele estÃ¡ associado (pensando em um vetor, encontrar a posiÃ§Ã£o em que ele se encontra)</li>\n<li>O Hashing (tabela de dispersÃ£o) consiste em um mÃ©todo de cÃ¡lculo de endereÃ§o (de chave) a partir do valor, de forma que, no caso mÃ©dio, a chave pode ser encontrada em tempo constante.</li>\n<li>Exemplo: encontrar a posiÃ§Ã£o em que um certo nome estÃ¡ armazenado.</li>\n<li>Complexidade:</li>\n<li>ğ‘‚(ğ‘›), se o vetor nÃ£o estiver ordenado</li>\n<li>ğ‘‚(log ğ‘›), usando busca binÃ¡ria em vetor ordenado</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/3a8d599ab64bbe795d2ad110b8ce8d95/3f8cf/img12.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 12.269938650306749%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVR42iXK3wrBYACG8V0PmSXNgUtwmxIhIYeK0mz7tlbjQKv5E2bKiRw4MN+zr+3s/T29Wua3+QkThAFulb9TQXqNYkuhI/0WqFZ2U7VaaddQbha/zKkr6xB20N7xiv26SxLOyRKLsxhxdIeQ2nziJSdvDE+bdLcgsvpcgynyYRFtB9yCGbwEF3/CYdPje3fIASYLgI/r7L2LAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img12' title='' src='/static/3a8d599ab64bbe795d2ad110b8ce8d95/a6d36/img12.png' srcset='/static/3a8d599ab64bbe795d2ad110b8ce8d95/222b7/img12.png 163w,\n/static/3a8d599ab64bbe795d2ad110b8ce8d95/ff46a/img12.png 325w,\n/static/3a8d599ab64bbe795d2ad110b8ce8d95/a6d36/img12.png 650w,\n/static/3a8d599ab64bbe795d2ad110b8ce8d95/e548f/img12.png 975w,\n/static/3a8d599ab64bbe795d2ad110b8ce8d95/3f8cf/img12.png 1293w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>Agora, suponha que tivÃ©ssemos uma â€œfunÃ§Ã£o mÃ¡gicaâ€ que, dado um nome, calcule em tempo constante exatamente a posiÃ§Ã£o que ele deveria ocupar nesse vetor.</li>\n<li>Essa Ã© a ideia da funÃ§Ã£o hash. Claro que na prÃ¡tica isto nÃ£o Ã© tÃ£o simples, mas o nosso foco aqui Ã© mais especÃ­fico.</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/00e05414414a69d5b24a95b394b0c590/d4377/img13.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 12.269938650306749%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkElEQVR42h3J7Q6BYABA4e6yLVsm888NuDyzktD62kqNGHu1lSTNGDqsf+fZkR7umPNU4W6pfH2Nqy5TGj0IhrycAZWpdV0vFApd5WYqtIFGPpOprT6EIy660vkdTZCa7EBiG4jY51MKjqHD1l3SXjMasWMfrKHKKNKIxDH/3+2ceitOkQNNjth4xPacZyH4ARKshugrYJawAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img13' title='' src='/static/00e05414414a69d5b24a95b394b0c590/a6d36/img13.png' srcset='/static/00e05414414a69d5b24a95b394b0c590/222b7/img13.png 163w,\n/static/00e05414414a69d5b24a95b394b0c590/ff46a/img13.png 325w,\n/static/00e05414414a69d5b24a95b394b0c590/a6d36/img13.png 650w,\n/static/00e05414414a69d5b24a95b394b0c590/e548f/img13.png 975w,\n/static/00e05414414a69d5b24a95b394b0c590/d4377/img13.png 1294w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>De forma muito simplista, uma funÃ§Ã£o hash nos gera um nÃºmero que identifica um dado qualquer (outro nÃºmero, uma string, uma struct...)</li>\n<li>Idealmente, identifica unicamente, de forma que cada chave estÃ¡ associada a apenas um valor. Na prÃ¡tica, podemos ter problema de colisÃµes.</li>\n<li>E o que isto nos ajuda com strings?</li>\n<li>Comparar duas substrings tem complexidade ğ‘‚(ğ‘›), sendo n o nÃºmero de caracteres.</li>\n<li>Mas, se calcularmos um hash dessas substrings, obteremos seus â€œnÃºmeros de identificaÃ§Ã£oâ€, que podem ser comparados em ğ‘‚(1).</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/ff84e81e309c7621dbcebd1b94f8f318/2bef9/img14.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfElEQVR42p1SbU7CQBDlLF7EP17EM3gGEs9APIMIxOgPg78FozEm1RDaqCkt/YK2tLZ0P56zWzFogBAneensdObN251ptNttWJYJZYwzcMbAGAfnHEII/d0JypdU+2L7uH820FBE6dzG9P0RLiFwDNjWABPrDvki0I2kFKhNYptJKXWDxqpAkDpW5eRz7VdVSUqrOpmUyqrAPtZYP8yiGRzHxbKk4sqFyMakKUV+e4bo9AjVxwMkm4KrOIsxn8c/TTcTziJMJg4+8wwoTPCECGSAvN9C1DwkwiHkkuLpEykOkWaFfvethLveR/4p1Ob7NMl/EG61KAJNYjOhWpEkSTSqZUmdY4jSoz8cxfAccesYzBuR3BSy9GlQJeJFpif7i1BNlehIeQnTHMEwDEShS7s0BPNvIJiNtNtEcHKA4vUaYjEAD/vUzIXn+bQNha5XPAr7XVmpUIPaZ21Cs4sVgnEHPiEwO3S++Ab5Vg/h21Xtr8XrPFXbQ2Rdav8LWSZL2wGUOj8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img14' title='' src='/static/ff84e81e309c7621dbcebd1b94f8f318/a6d36/img14.png' srcset='/static/ff84e81e309c7621dbcebd1b94f8f318/222b7/img14.png 163w,\n/static/ff84e81e309c7621dbcebd1b94f8f318/ff46a/img14.png 325w,\n/static/ff84e81e309c7621dbcebd1b94f8f318/a6d36/img14.png 650w,\n/static/ff84e81e309c7621dbcebd1b94f8f318/e548f/img14.png 975w,\n/static/ff84e81e309c7621dbcebd1b94f8f318/2bef9/img14.png 1024w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>Na prÃ¡tica:\n<ul>\n<li>Dada a(s) string(s) de entrada, realizaremos um prÃ©-processamento para o cÃ¡lculo do hash (ğ‘‚(ğ‘›)).</li>\n<li>A partir deste prÃ©-processamento, podemos obter o hash de qualquer substring em ğ‘‚(1).</li>\n<li>Com isso, a resoluÃ§Ã£o de uma sÃ©rie de problemas terÃ¡ uma grande queda de complexidade, comparada com a soluÃ§Ã£o por forÃ§a bruta.</li>\n<li>Para calcular o hash de uma string qualquer, utilizaremos a tÃ©cnica de polynomial rolling. De forma que, dada uma string ğ‘  , o â„ğ‘ğ‘ â„(ğ‘ ) Ã© calculado da seguinte forma:</li>\n</ul>\n</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/75a788ada1e123a1da3454a251e1cd70/bb3b7/img15.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 16.56441717791411%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbUlEQVR42o2NOQ4EIRAD+f8rCQgR943AK7d2sgnGkkVj3IWy1sJ7jzEGnHMopWCthZwzYozovWPvjTknUkpy51lrlU5rTTJ2matzDigCjTGyyAJNMHPO7NH33lc/bwp/cUlrLb8+AAJDCAL9qh+iBOpnhvR8OQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img15' title='' src='/static/75a788ada1e123a1da3454a251e1cd70/a6d36/img15.png' srcset='/static/75a788ada1e123a1da3454a251e1cd70/222b7/img15.png 163w,\n/static/75a788ada1e123a1da3454a251e1cd70/ff46a/img15.png 325w,\n/static/75a788ada1e123a1da3454a251e1cd70/a6d36/img15.png 650w,\n/static/75a788ada1e123a1da3454a251e1cd70/e548f/img15.png 975w,\n/static/75a788ada1e123a1da3454a251e1cd70/bb3b7/img15.png 1211w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>em que ğ‘ƒ Ã© um nÃºmero primo muito grande e ğ‘ uma constante aleatÃ³ria (normalmente um primo de valor prÃ³ximo ao tamanho do alfabeto)</p>\n</li>\n<li>\n<p>A ideia Ã© evitar colisÃµes, mas nÃ£o entraremos a fundo na fundamentaÃ§Ã£o probabilÃ­stica deste problema.</p>\n</li>\n<li>\n<p>Exemplo: seja ğ‘  = â€œğ´ğ¿ğ¿ğ¸ğ‘Œâ€, b = 3 e P = 97:</p>\n</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/5439692a1f394bece718b115854e092a/c9c3a/img16.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 11.042944785276074%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAg0lEQVR42i2KwQqCQBRF/aYISukbqnV/2ibETdgMZFMUgbiKRDGjVpGTpzdTiwvn3nODziywuxns56DHfJRET4RH9BKrQlBD7xy7Db9H8o3+vxCbDsBMCcpTTJsncDPQbHkWCY/C9Yyu3NCcV/S19s7x+5p6d8/j36/NeF3WVMel8IEvPbaFBtNjmnYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img16' title='' src='/static/5439692a1f394bece718b115854e092a/a6d36/img16.png' srcset='/static/5439692a1f394bece718b115854e092a/222b7/img16.png 163w,\n/static/5439692a1f394bece718b115854e092a/ff46a/img16.png 325w,\n/static/5439692a1f394bece718b115854e092a/a6d36/img16.png 650w,\n/static/5439692a1f394bece718b115854e092a/e548f/img16.png 975w,\n/static/5439692a1f394bece718b115854e092a/c9c3a/img16.png 1289w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>(65 Ã— 3^4 + 76 Ã— 3^3 + 76 Ã— 3^2 + 69 Ã— 3^1 + 89 âˆ— 3^0) ğ‘šğ‘œğ‘‘ 97 = 52\nâ„ğ‘ğ‘ â„(\"ALLEY\") = 52</p>\n<h3 id=\"prÃ©-processamento\" style=\"position:relative;\"><a href=\"#pr%C3%A9-processamento\" aria-label=\"prÃ© processamento permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PrÃ©-processamento</h3>\n<ul>\n<li>Durante o prÃ©-processamento de nossa substring, construiremos dois vetores que serÃ£o importantes para o cÃ¡lculo do hash de qualquer substring:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">â„[ğ‘–] = armazena o hash do prefixo s[0...i]\nâ„[0] = ğ‘ [0]\nâ„[ğ‘–] = (â„[ğ‘– âˆ’ 1] âˆ— ğ‘ + ğ‘ [ğ‘–]) ğ‘šğ‘œğ‘‘ ğ‘ƒ\nğ‘[ğ‘–] = armazena o coeficiente polinomial ğ‘ğ‘– ğ‘šğ‘œğ‘‘ ğ‘ƒ\nğ‘[0] = 1\nğ‘[ğ‘–] = (ğ‘[ğ‘– âˆ’ 1] âˆ— ğ‘) ğ‘šğ‘œğ‘‘ ğ‘ƒ</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Confira a GIF abaixo:</li>\n</ul>\n<p><img src=\"/static/gif2-633011eee0bb7e54f0cdc34b3dd3ac8f.gif\" alt=\"img17-img29\"></p>\n<ul>\n<li>A partir das estruturas criadas no prÃ©-processamento podemos obter o hash de qualquer substring em tempo constante.</li>\n<li>Por exemplo, suponha que queremos o hash de â€œLLEâ€ da substring anterior, dado por â„ğ‘ğ‘ â„ â€œğ¿ğ¿ğ¸â€ = ğ¿. ğ‘2 + ğ¿. ğ‘ + ğ¸.</li>\n<li>NÃ³s jÃ¡ temos calculados os seguintes hashs:\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">â„ 3 = â„ğ‘ğ‘ â„ â€œğ´ğ¿ğ¿ğ¸â€ = ğ´. ğ‘3 + ğ¿. ğ‘2 + ğ¿. ğ‘ + ğ¸\nâ„ 0 = â„ğ‘ğ‘ â„ â€œğ´â€ = ğ´</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n<li>A partir destes podemos fazer a seguinte operaÃ§Ã£o:</li>\n<li>â„ğ‘ğ‘ â„(\"LLE\") = hash(\"ALLE\") âˆ’ hash(\"A\").ğ‘3 = ğ´. ğ‘3 + ğ¿. ğ‘2 + ğ¿. ğ‘ + ğ¸ âˆ’ ğ´.ğ‘3</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/8a32f22aeaf4390beed4124dc93dc250/2bef9/img30.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0klEQVR42o1SXW/TMBTtL+SZN1555+/wOmASUoGJv8Am2LR2aZnWrel3EuejdZImthvbB9vpoAVVwtKRj+17j499b6fb7cIfP8EOKaWDUtrAcvV77ySaBtrk3i9jXHs/0bFCxYYgWo4QB48gwZPhDwgt5gMEkx9gFXUXaq1xatgze4ETBF9A0m+QpWfQh8yvzfoKDSPGgTTBEv87nKCcv4W+fYHd8A3k4DVE7xXU3Uvo/LsLErxGXdfgXIAz1nLxzJn7miPBKgsg0gnicQ/bcIR0OgRPfChRuyBCCIIgQBzHiKLIzARJkiA0e1EYYrfbHQuy9RwN8bCZ3oCFHujsBtXqFloUrUPBjTuOim2RVxtsWYGaV84lMy61+sthSXyIsI/o4RLlogcyukQ6voLiuQsqigKUUuQFRUYT0GKNvKQoy9Lt22IcCSpeQG0JeB5C7mdBV9ANhy3sc3VtKwnJ0agdlCvUv1Xv2ApqbfpNtVAH9tuEA+yFbXybZ6DkH673bZOuc8yWCfxZhMVqbZ7EkGQl1rQ2T+OOZ7Ry69RwqU73YyfzLxDcf8RieI6Z9wGLwbnjk94ZJv2zlvffYXb33p1PDY8fP5k//nKAC2T+VzN/xi992EYV4pD57AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img30' title='' src='/static/8a32f22aeaf4390beed4124dc93dc250/a6d36/img30.png' srcset='/static/8a32f22aeaf4390beed4124dc93dc250/222b7/img30.png 163w,\n/static/8a32f22aeaf4390beed4124dc93dc250/ff46a/img30.png 325w,\n/static/8a32f22aeaf4390beed4124dc93dc250/a6d36/img30.png 650w,\n/static/8a32f22aeaf4390beed4124dc93dc250/e548f/img30.png 975w,\n/static/8a32f22aeaf4390beed4124dc93dc250/2bef9/img30.png 1024w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3 id=\"hash-de-substring\" style=\"position:relative;\"><a href=\"#hash-de-substring\" aria-label=\"hash de substring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hash de substring</h3>\n<ul>\n<li>A partir das estruturas criadas no prÃ©-processamento podemos obter o hash de qualquer substring em tempo constante.</li>\n<li>Generalizando:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">â„ğ‘ğ‘ â„ ğ‘† [ğ‘™ â€¦ ğ‘Ÿ] = (â„ [ğ‘Ÿ] âˆ’ â„ [ğ‘™ âˆ’ 1] âˆ— ğ‘ [ğ‘Ÿ âˆ’ ğ‘™ + 1] ) ğ‘šğ‘œğ‘‘ ğ‘ƒ</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"complexidade-do-string-hashing\" style=\"position:relative;\"><a href=\"#complexidade-do-string-hashing\" aria-label=\"complexidade do string hashing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Complexidade do String Hashing</h3>\n<ul>\n<li>PrÃ©-processamento: ğ‘‚(ğ‘›)</li>\n<li>Consulta: ğ‘‚(1)</li>\n</ul>\n<h3 id=\"implementaÃ§Ã£o\" style=\"position:relative;\"><a href=\"#implementa%C3%A7%C3%A3o\" aria-label=\"implementaÃ§Ã£o permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ImplementaÃ§Ã£o</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\">mt19937 <span class=\"token function\">rng</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> chrono<span class=\"token double-colon punctuation\">::</span>steady_clock<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">time_since_epoch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ll P <span class=\"token operator\">=</span> <span class=\"token number\">1e18</span><span class=\"token operator\">+</span><span class=\"token number\">9</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ll b <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">uniform_int_distribution</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>ll<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> P<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>rng<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">inline</span> ll <span class=\"token function\">mult</span><span class=\"token punctuation\">(</span>ll a<span class=\"token punctuation\">,</span> ll b<span class=\"token punctuation\">,</span> ll mod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>a<span class=\"token operator\">*</span>b<span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>ll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> <span class=\"token keyword\">double</span><span class=\"token punctuation\">)</span>a<span class=\"token operator\">/</span>mod<span class=\"token operator\">*</span>b<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>mod <span class=\"token operator\">+</span> mod<span class=\"token punctuation\">)</span><span class=\"token operator\">%</span>mod<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">hash_str</span>\n<span class=\"token punctuation\">{</span>\n    vector<span class=\"token operator\">&lt;</span>ll<span class=\"token operator\">></span> h<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">hash_str</span><span class=\"token punctuation\">(</span>string s<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">p</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        h<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> s<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">128</span><span class=\"token punctuation\">;</span>\n        p<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            h<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token function\">mult</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">,</span>P<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> s<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">128</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> P<span class=\"token punctuation\">;</span>\n            p<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">mult</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">,</span>P<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    ll <span class=\"token function\">sub_hash</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> l<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>l <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> h<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        ll ans <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token function\">mult</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">[</span>l<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">[</span>r<span class=\"token operator\">-</span>l<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>P<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> P<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ans <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            ans <span class=\"token operator\">+=</span> P<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"busca-em-strings-com-string-hashing\" style=\"position:relative;\"><a href=\"#busca-em-strings-com-string-hashing\" aria-label=\"busca em strings com string hashing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Busca em strings com String Hashing</h3>\n<ul>\n<li>Dada uma string ğ‘†, de tamanho ğ‘›, como determinados se a string ğ‘ƒ, de tamanho ğ‘š, estÃ¡ presente em ğ‘†?</li>\n<li>Calculamos o hash das duas strings, e entÃ£o comparamos ğ‘ƒ com todas as substrings de tamanho ğ‘š de ğ‘†. A ideia Ã© semelhante a forÃ§a bruta, porÃ©m se torna eficiente devido ao uso do hashing.</li>\n<li>Algoritmo de Rabin-Karp</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\">hash_str <span class=\"token function\">hs</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">hp</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> ans <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nvector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span> pos<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> m <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token operator\">-</span>m<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hs<span class=\"token punctuation\">.</span><span class=\"token function\">sub_hash</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> i<span class=\"token operator\">+</span>m<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> hp<span class=\"token punctuation\">.</span><span class=\"token function\">sub_hash</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> m<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        ans<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        pos<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Complexidades:</li>\n<li>ForÃ§a bruta: ğ‘‚(ğ‘›. ğ‘š)</li>\n<li>KMP: ğ‘‚(ğ‘› + ğ‘š)</li>\n<li>String Hashing:</li>\n<li>PrÃ©-processamento: ğ‘‚(ğ‘› + ğ‘š)</li>\n<li>Consulta: ğ‘‚(ğ‘› âˆ’ ğ‘š)</li>\n</ul>\n<h3 id=\"exemplos-de-outros-problemas\" style=\"position:relative;\"><a href=\"#exemplos-de-outros-problemas\" aria-label=\"exemplos de outros problemas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exemplos de outros problemas</h3>\n<ul>\n<li>Determinar a maior substring de ğ‘ƒ que ocorre em ğ‘†</li>\n<li>Busca binÃ¡ria no tamanho da substring. Procura todas as substrings de tamanho ğ‘¥ de ğ‘ƒ em ğ‘†.</li>\n<li>ğ‘‚(ğ‘›Â²log ğ‘›)</li>\n<li>Determinar a quantidade de diferentes substrings de S.</li>\n<li>Para cada possÃ­vel tamanho de substring cria um set e o povoe com o hash de todas as substrings possÃ­veis. Somando o tamanho dos sets teremos a quantidade de diferentes substrings de ğ‘†.</li>\n<li>ğ‘‚(ğ‘›Â²log ğ‘›)</li>\n<li>Determinar a maior substring palindrÃ´mica de S.</li>\n<li>Backward hash: calcular o hash para a string invertida tambÃ©m.</li>\n<li>ğ‘‚(ğ‘›Â²)</li>\n<li>Utilizando algoritmo de Manacher (sem String Hashing): ğ‘‚(ğ‘›)</li>\n</ul>\n<h3 id=\"cuidados\" style=\"position:relative;\"><a href=\"#cuidados\" aria-label=\"cuidados permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cuidados</h3>\n<ul>\n<li>O maior problema da tÃ©cnica de String Hashing Ã© a possibilidade da ocorrÃªncia de colisÃµes: quando duas strings diferentes resultam no mesmo hash.</li>\n<li>Formas de diminuir a probabilidade de ocorrÃªncia:</li>\n<li>UtilizaÃ§Ã£o de valores adequados para os parÃ¢metros ğ‘ e ğ‘ƒ.</li>\n<li>Duplo hashing.</li>\n</ul>\n<h3 id=\"outras-tÃ©cnicas-para-lidar-com-strings\" style=\"position:relative;\"><a href=\"#outras-t%C3%A9cnicas-para-lidar-com-strings\" aria-label=\"outras tÃ©cnicas para lidar com strings permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Outras tÃ©cnicas para lidar com Strings</h3>\n<ul>\n<li>Existem diversas outras tÃ©cnicas e estruturas que ajudam a lidar com problemas de Strings, por exemplo:</li>\n<li>Para lidar com palÃ­ndromos:\n<ul>\n<li>Algoritmo de Manacher</li>\n<li>Palindromic Tree</li>\n<li>Z-function</li>\n<li>String matching utilizando autÃ´mato finito</li>\n<li>Algoritmo de Aho-Corasick</li>\n<li>Trie</li>\n<li>Suffix Array</li>\n<li>Suffix Tree</li>\n<li>AutÃ´mato de Sufixos</li>\n<li>FatorizaÃ§Ã£o de Lyndon / Algoritmo de Duval</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"referÃªncias\" style=\"position:relative;\"><a href=\"#refer%C3%AAncias\" aria-label=\"referÃªncias permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ReferÃªncias</h3>\n<p>S. Halim e F. Halim. Competitive Programming 2.</p>\n<p>FÃ¡bio L. Usberti. Processamento de Cadeias de Caracteres. Summer School 2019.</p>\n<p>Rafael Grandsire. String Hashing. Summer School 2022.</p>\n<p><a href=\"https://www.youtube.com/watch?v=RXISWaGmYW8\">https://www.youtube.com/watch?v=RXISWaGmYW8</a></p>\n<p><a href=\"https://cp-algorithms-brasil.com/strings/prefixo.html\">https://cp-algorithms-brasil.com/strings/prefixo.html</a></p>\n<p><a href=\"https://www.geeksforgeeks.org/kmp-algorithm-for-pattern-searching/\">https://www.geeksforgeeks.org/kmp-algorithm-for-pattern-searching/</a></p>\n<p><a href=\"https://www.ime.usp.br/~pf/estruturas-de-dados/aulas/kmp.html\">https://www.ime.usp.br/~pf/estruturas-de-dados/aulas/kmp.html</a></p>\n<p><a href=\"http://www2.ic.uff.br/~boeres/slides_ed/ed_TabelaHash.pdf\">http://www2.ic.uff.br/~boeres/slides_ed/ed_TabelaHash.pdf</a></p>\n<p><a href=\"https://usaco.guide/CPH.pdf\">https://usaco.guide/CPH.pdf</a></p>\n<p><a href=\"https://cp-algorithms.com/string/string-hashing.html\">https://cp-algorithms.com/string/string-hashing.html</a></p>\n<p><a href=\"https://www.geeksforgeeks.org/string-hashing-using-polynomial-rolling-hash-function/\">https://www.geeksforgeeks.org/string-hashing-using-polynomial-rolling-hash-function/</a></p>\n<p><a href=\"https://usaco.guide/gold/string-hashing?lang=cpp\">https://usaco.guide/gold/string-hashing?lang=cpp</a></p>"}},"pageContext":{"id":"e324fd3f-4ca0-54bc-bb03-9c00fef17dfb","frontmatter__slug":"kmp-string-hashing","__params":{"frontmatter__slug":"kmp-string-hashing"}}},"staticQueryHashes":["3159585216"],"slicesMap":{}}