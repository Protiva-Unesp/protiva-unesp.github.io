{"componentChunkName":"component---src-pages-introducao-a-programacao-markdown-remark-frontmatter-slug-tsx","path":"/introducao-a-programacao/disjoint-set-union-find/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"01 - Disjoint-set (Union-find)","description":"Conjuntos disjuntos","author":"Pedro Henrique Paiola, Rene Pegoraro, Wilson M Yonezawa, Toki Yoshida, Nick Papi Barbosa Gomes, Pseudo-Pedro Henrique Morelli"},"html":"<h2 id=\"introduÃ§Ã£o\" style=\"position:relative;\"><a href=\"#introdu%C3%A7%C3%A3o\" aria-label=\"introduÃ§Ã£o permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IntroduÃ§Ã£o</h2>\n<ul>\n<li>\n<p>Disjoint Set Union (DSU), tambÃ©m chamada de Union-find, devido as operaÃ§Ãµes que esta estrutura de dados permite</p>\n</li>\n<li>\n<p>Esta estrutura armazena vÃ¡rios conjuntos disjuntos de elementos</p>\n<ul>\n<li>Inicialmente, cada conjunto contÃ©m precisamente um elemento</li>\n</ul>\n</li>\n<li>\n<p>Permite a realizaÃ§Ã£o de duas operaÃ§Ãµes:</p>\n<ul>\n<li>merge(a, b): une os conjuntos aos quais a e b pertencem.</li>\n<li>find(a): determina a qual conjunto o elemento a pertence.</li>\n</ul>\n</li>\n<li>\n<p>A partir do find, normalmente define-se a funÃ§Ã£o same:</p>\n<ul>\n<li>same(a, b): determina se a e b pertencem ao mesmo conjunto.</li>\n</ul>\n</li>\n<li>\n<p>Confira a GIF abaixo:</p>\n</li>\n</ul>\n<p><img src=\"/static/gif1-cadfc3592eda96b912bb46b202e5062c.gif\" alt=\"img1-img5\"></p>\n<h3 id=\"estruturando-a-soluÃ§Ã£o\" style=\"position:relative;\"><a href=\"#estruturando-a-solu%C3%A7%C3%A3o\" aria-label=\"estruturando a soluÃ§Ã£o permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Estruturando a soluÃ§Ã£o</h3>\n<ul>\n<li>Para implementar uma DSU, cada conjunto serÃ¡ representado por uma Ã¡rvore, onde a raiz da Ã¡rvore serÃ¡ o representante/lÃ­der do conjunto.</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/8992ab49fb275f3d2029073b8395e0cc/2bef9/img7.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMElEQVR42p1S7U6DQBDk/V+kakwTTXwJNVFLsT+slFikpUAwR/k67m5clp5pjDVtN5nM3u4x+3E44/EYi4WP3qSU6LqOoZSForNkqF2cfaU518cMfTsLN3h0X+Fo1WKzchEtH4gnSNZTJLGHdfSEPPMRr17wlQecy9M54uiZ7t4jS99IsIU1YwwXcMjlRC+slNxDH+sG1op8yehkRR3WnCMV/DbHOk3b8hjWOh5V4VRzbLuiKNDSDq2VZQkhxHmCdV3zg1TEvbikRfe+jZ8sWIiCx62oK0X7qqsKTdMORcg/o8OGFq9/XsvsLdv8sfj/BY3Cdivof6LRjD4IQ/eOgcP1je1sYE2sDXbnwT+6w9C7xOfsGkvij+mA0LtCMLkgjPgcuCMk8xuk77cHkfl3zN/ok1aawFBOhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img7' title='' src='/static/8992ab49fb275f3d2029073b8395e0cc/a6d36/img7.png' srcset='/static/8992ab49fb275f3d2029073b8395e0cc/222b7/img7.png 163w,\n/static/8992ab49fb275f3d2029073b8395e0cc/ff46a/img7.png 325w,\n/static/8992ab49fb275f3d2029073b8395e0cc/a6d36/img7.png 650w,\n/static/8992ab49fb275f3d2029073b8395e0cc/e548f/img7.png 975w,\n/static/8992ab49fb275f3d2029073b8395e0cc/2bef9/img7.png 1024w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3 id=\"implementaÃ§Ã£o-nem-tÃ£o-ingÃªnua\" style=\"position:relative;\"><a href=\"#implementa%C3%A7%C3%A3o-nem-t%C3%A3o-ing%C3%AAnua\" aria-label=\"implementaÃ§Ã£o nem tÃ£o ingÃªnua permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ImplementaÃ§Ã£o (nem tÃ£o) ingÃªnua</h3>\n<ul>\n<li>\n<p>find(x): retorna o lÃ­der do conjunto a que x pertence</p>\n</li>\n<li>\n<p>merge(x, y): conecta os lÃ­deres. Supondo que X seja lÃ­der de x e Y lÃ­der de y, vamos â€œelegerâ€ Y como lÃ­der de X.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> pai<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> MAX_N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        pai<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> x<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">bool</span> <span class=\"token function\">same</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> u<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pai<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Confira a GIF abaixo:</li>\n</ul>\n<p><img src=\"/static/gif2-e74d9329cfe7540063feef033fad8592.gif\" alt=\"img7-img9\"></p>\n<ul>\n<li>Confira a GIF abaixo:</li>\n</ul>\n<p><img src=\"/static/gif3-c9e6cfc403456c4a543ea5c6dd8513e0.gif\" alt=\"img10-img14\"></p>\n<h3 id=\"path-compression\" style=\"position:relative;\"><a href=\"#path-compression\" aria-label=\"path compression permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Path Compression</h3>\n<ul>\n<li>Ideia: comprimir os caminhos, fazendo todos os elementos do conjunto apontarem para o lÃ­der diretamente.</li>\n<li>Uma espÃ©cie de ProgramaÃ§Ã£o DinÃ¢mica.</li>\n<li>Tempo por operaÃ§Ã£o: O(log n) amortizado</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> pai<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> MAX_N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        pai<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> x<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> u<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pai<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Confira a GIF abaixo:</li>\n</ul>\n<p><img src=\"/static/gif4-4242e5fc87429bbd17d98bb20a288224.gif\" alt=\"img15-img23\"></p>\n<h3 id=\"union-by-size\" style=\"position:relative;\"><a href=\"#union-by-size\" aria-label=\"union by size permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Union by size</h3>\n<ul>\n<li>Ideia: unir os conjuntos do menor para o maior, minimizando a profundidade dos conjuntos.</li>\n<li>EstratÃ©gia â€œsmall-to-largeâ€</li>\n<li>Tempo por operaÃ§Ã£o: O(log n)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> pai<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> tam<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> MAX_N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        pai<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n        tam<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> x<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> u<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> v<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tam<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> tam<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pai<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> b<span class=\"token punctuation\">;</span>\n    tam<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> tam<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Confira a GIF abaixo:</li>\n</ul>\n<p><img src=\"/static/gif5-183c75fb2f424e5890304abd49b1c8e9.gif\" alt=\"img24-img28\"></p>\n<h3 id=\"path-compression--union-by-size\" style=\"position:relative;\"><a href=\"#path-compression--union-by-size\" aria-label=\"path compression  union by size permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Path Compression + Union by size</h3>\n<ul>\n<li>Unindo ambas as tÃ©cnicas garante-se complexidade quase constante, sendo a implementaÃ§Ã£o mais recomendada.</li>\n<li>Outras tÃ©cnicas de melhorias (na uniÃ£o dos conjuntos)\n<ul>\n<li>Union by rank</li>\n<li>Linking by index</li>\n<li>Coin-flip linking</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"problema-war-uva---10158\" style=\"position:relative;\"><a href=\"#problema-war-uva---10158\" aria-label=\"problema war uva   10158 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Problema: WAR (UVa - 10158)</h3>\n<ul>\n<li>\n<p>Conjunto n de pessoas de diferentes paÃ­ses.</p>\n</li>\n<li>\n<p>Duas pessoas sÃ£o consideradas amigas se sÃ£o do mesmo paÃ­s, ou inimigas se sÃ£o diferentes paÃ­ses.</p>\n</li>\n<li>\n<p>Neste problema, podem ser feitas 4 tipos de operaÃ§Ãµes:</p>\n<ul>\n<li>setFriends(x, y)</li>\n<li>setEnemies(x, y)</li>\n<li>areFriends(x, y)</li>\n<li>areEnemies(x,y)</li>\n</ul>\n</li>\n<li>\n<p>Se uma operaÃ§Ã£o contradizer alguma anterior, ela nÃ£o Ã© realizada e imprimimos -1 na tela</p>\n</li>\n<li>\n<p>Propriedades da amizade ~:</p>\n<ul>\n<li>Se ğ‘¥ ~ ğ‘¦ e ğ‘¦ ~ ğ‘§, entÃ£o ğ‘¥ ~ ğ‘§</li>\n<li>Se ğ‘¥ ~ ğ‘¦ entÃ£o ğ‘¦ ~ ğ‘¥</li>\n<li>ğ‘¥ ~ ğ‘¥</li>\n</ul>\n</li>\n<li>\n<p>Propriedades da inimizade âˆ—:</p>\n<ul>\n<li>Se ğ‘¥ âˆ— ğ‘¦ entÃ£o ğ‘¦ âˆ— ğ‘¥</li>\n<li>NÃ£o acontece ğ‘¥ âˆ— ğ‘¥</li>\n</ul>\n</li>\n<li>\n<p>E tambÃ©m</p>\n<ul>\n<li>Se ğ‘¥ âˆ— ğ‘¦ e ğ‘¦ âˆ— ğ‘§, entÃ£o ğ‘¥ ~ ğ‘§ (o inimigo do meu inimigo Ã© meu amigo)</li>\n<li>Se ğ‘¥ ~ ğ‘¦ e ğ‘¦ âˆ— ğ‘§, entÃ£o ğ‘¥ âˆ— ğ‘§ (o inimigo do meu amigo Ã© meu inimigo)</li>\n</ul>\n</li>\n<li>\n<p>A partir dessas propriedades, podemos modelar o problema utilizando disjoint-sets. Cada pessoa ğ‘¥ possui dois conjuntos associados, o conjunto amigos(ğ‘¥) e o conjunto inimigos(ğ‘¥). E estes conjuntos devem satisfazer as propriedades anteriores.</p>\n</li>\n<li>\n<p>Detalhe de implementaÃ§Ã£o: nos exemplos que vimos atÃ© agora, criamos um vetor pai de tamanho N, de forma que cada elemento comeÃ§a associado a um conjunto. Neste exercÃ­cio vamos criar um vetor de tamanho 2 * N, onde a primeira metade sÃ£o os conjuntos de amigos e a segunda de inimigos</p>\n</li>\n<li>\n<p>Inicializando os conjuntos:</p>\n<ul>\n<li>Toda pessoa Ã© amiga dela mesma (ğ‘¥ ~ ğ‘¥)\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">pai[amigos(x)] = x;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>NinguÃ©m Ã© inimigo de si mesmo (NÃ£o ğ‘¥ âˆ— ğ‘¥)\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">pai[inimigos(x)] = 0; //Considerando as pessoas numeradas de 1 a n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>setFriends(x, y)</p>\n<ul>\n<li>Primeiro, precisamos verificar se x e y nÃ£o sÃ£o inimigos, o que iria gerar uma contradiÃ§Ã£o</li>\n<li>Caso nÃ£o, entÃ£o fazemos\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">- merge(amigos(x), amigos(y))\n- merge(inimigos(x), inimigos(y))</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>setEnemies(x, y)</p>\n<ul>\n<li>Primeiro, precisamos verificar se x e y nÃ£o sÃ£o amigos, o que iria gerar uma contradiÃ§Ã£o</li>\n<li>Caso nÃ£o, entÃ£o fazemos\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">merge(amigos(x), inimigos(y))\nmerge(inimigos(x), amigos(y))</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>areFriends(x, y)</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">same(amigos(x), amigos(y))</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>areEnemies(x, y)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">same(amigos(x), inimigos(y))</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3 id=\"rollback\" style=\"position:relative;\"><a href=\"#rollback\" aria-label=\"rollback permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rollback</h3>\n<ul>\n<li>Em alguns problemas, pode ser necessÃ¡rio realizar um rollback, desfazendo uniÃµes imediatamente anteriores.</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/01a41af820e7d2cd5a5323be665fdc28/6bfd0/img29.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 37.423312883435585%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABCklEQVR42m2RTU7EMAyFeyGOwGXmDnMHjsYCIRYsEDASYjPSaJqETv7j5I2TtoFqeFJlybU/PztDzhkpJTgfIKWENgYxJtR8lTEacjxCi3c4e2m5nAkhRhhrIcSZowNRRikFg2WAUqoB1s9ygRAjqHB3OIGe7kGPd8jmowHH8QzvPTJDvD62AUr9YJomDETUHFY55zq0NtSJ7AclCWR3AEpsdTGGXme0aHUpRYQQMGBRTdYJNblRBZ941W8JKLMUz6GamS66xVXD317nfL/db1cEve5Bzztk+bL8yt2E5a3mTf4BCn4U3x2W1Tro6wH0uecbvm2AiR9GCAnqJm4cuo19bNE32t56Bl4Bd2UiBaq1jrYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img29' title='' src='/static/01a41af820e7d2cd5a5323be665fdc28/a6d36/img29.png' srcset='/static/01a41af820e7d2cd5a5323be665fdc28/222b7/img29.png 163w,\n/static/01a41af820e7d2cd5a5323be665fdc28/ff46a/img29.png 325w,\n/static/01a41af820e7d2cd5a5323be665fdc28/a6d36/img29.png 650w,\n/static/01a41af820e7d2cd5a5323be665fdc28/e548f/img29.png 975w,\n/static/01a41af820e7d2cd5a5323be665fdc28/6bfd0/img29.png 1011w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>A cada operaÃ§Ã£o merge, sÃ£o feitas duas atribuiÃ§Ãµes:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">pai[i] = x;\ntam[j] = y;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<ul>\n<li>Sendo assim, basta salvar os valores antigos em uma pilha, para restaurar se for necessÃ¡rio.\n<ul>\n<li>Uma pilha para o vetor pai: &#x3C; i, pai[i] ></li>\n<li>Uma pilha para o vetor tam: &#x3C; j, tam[j] ></li>\n</ul>\n</li>\n<li>NÃ£o permite usar path compression.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> pai<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> tam<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nstack<span class=\"token operator\">&lt;</span>pair<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token operator\">></span> old_pai<span class=\"token punctuation\">;</span>\nstack<span class=\"token operator\">&lt;</span>pair<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token operator\">></span> <span class=\"token operator\">></span> old_tam<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> MAX_N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        pai<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n        tam<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> x<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> u<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> v<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tam<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> tam<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    old_pai<span class=\"token punctuation\">.</span><span class=\"token function\">emplace</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> pai<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    old_tam<span class=\"token punctuation\">.</span><span class=\"token function\">emplace</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> tam<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pai<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> b<span class=\"token punctuation\">;</span>\n    tam<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> tam<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">auto</span> paiAnt <span class=\"token operator\">=</span> old_pai<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">auto</span> tamAnt <span class=\"token operator\">=</span> old_tam<span class=\"token punctuation\">.</span><span class=\"token function\">top</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pai<span class=\"token punctuation\">[</span>paiAnt<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> paiAnt<span class=\"token punctuation\">.</span><span class=\"token function\">second</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    tam<span class=\"token punctuation\">[</span>tamAnt<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tamAnt<span class=\"token punctuation\">.</span><span class=\"token function\">second</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    old_pai<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    old_tam<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"persistÃªncia-parcial\" style=\"position:relative;\"><a href=\"#persist%C3%AAncia-parcial\" aria-label=\"persistÃªncia parcial permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PersistÃªncia parcial</h3>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/ebfff7e7d3181a6c8256382c01051765/2bef9/img30.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoElEQVR42o1SXWvbQBDU/39v8pDmoU95KLjQ/gKHUvJg0oYU28XEEGhpbEl3km193Em+yc7KZxNCIAvL3s7tzI1Ol4xGIyyXD2A416DrOs2+76X6Q3ZvZi8ZhDv7u8bkfoqk8zXW/++Qr2dIWdM5bLbQ3sjapH/wngghqIlEVuKsRp6lyPMURZEjy1YwJpW6RllYWFsIXghmUJblsLYGbdu+Ek72+70IOh201mqNRCNCm81We+4ZY1VsWBvUdX10x1RB7z1aEeQmLTM6qb5p4AWLLkhoBHPOa41BM43MbHc7vVN1yGTDymDlZXdyGMWjA/0RPExwxThLIyIa+QkXji7llKNDwUhi0kF0GGfaA8bwVQUvODX0p0QyidFhxGJ9KSgGNuVJ0A9PrBKnnE1C6A8bHOan9IgYe+InLGAvZLcpjlgIg4laBZ08GxLlMrYVHYbTu+JQK2TfHzFuOxmu2u7FU6HkruH9BiRP8xF+js/w+8cFsuVXZA9DTm8+4tf1OVaLL9rny29YTD7hdvwBj/dX2sfZ2c0l7r5f4N/0M54BpWFQSeAb2CIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img30' title='' src='/static/ebfff7e7d3181a6c8256382c01051765/a6d36/img30.png' srcset='/static/ebfff7e7d3181a6c8256382c01051765/222b7/img30.png 163w,\n/static/ebfff7e7d3181a6c8256382c01051765/ff46a/img30.png 325w,\n/static/ebfff7e7d3181a6c8256382c01051765/a6d36/img30.png 650w,\n/static/ebfff7e7d3181a6c8256382c01051765/e548f/img30.png 975w,\n/static/ebfff7e7d3181a6c8256382c01051765/2bef9/img30.png 1024w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; '>\n      <a class='gatsby-resp-image-link' href='/static/83aa111634a8df829de307f5079718c5/2bef9/img31.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+UlEQVR42qVSy07EMAzs/39MD0j8BQcQEgUBPa1ElebZLW3egxMtnIBGWksjexJn7Djp+r7HOL6hmHM7QggVMcZL7H/4r6C9TGeHE8Pd4xO64DewjweIeSB/Dzk/Q/JXCDbQGsXzC1os51wLdIXY/ROcM2gtoZSAkhyMTZVLijnnsNY1CXdF2VpLQhrGGCxmgdGGhGTlSilM04R1XdsEjxJSSti2DYIKlMLNgqXTgu+4+hRhqpBDovl476/rMMcATdfdd1uLXC1YLFw6K19nOZ/rSx48SsQRaJIk6iAEp3mulf+V26HRYkxwPh5fmb/foAnj//tivK3+CzOaVzrF7OE3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img31' title='' src='/static/83aa111634a8df829de307f5079718c5/a6d36/img31.png' srcset='/static/83aa111634a8df829de307f5079718c5/222b7/img31.png 163w,\n/static/83aa111634a8df829de307f5079718c5/ff46a/img31.png 325w,\n/static/83aa111634a8df829de307f5079718c5/a6d36/img31.png 650w,\n/static/83aa111634a8df829de307f5079718c5/e548f/img31.png 975w,\n/static/83aa111634a8df829de307f5079718c5/2bef9/img31.png 1024w' sizes='(max-width: 650px) 100vw, 650px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<ul>\n<li>OperaÃ§Ãµes bÃ¡sicas:\n<ul>\n<li>merge(x, y): conecta os conjuntos de x e y (criando uma nova â€œversÃ£oâ€)</li>\n<li>find(x, t): retorna a qual conjunto x pertence no momento t</li>\n<li>same(x, y, t): verifica se x e y pertencem ao mesmo conjunto no momento t</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-cpp line-numbers\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> pai<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> tam<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> his<span class=\"token punctuation\">[</span>MAX_N <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> tempo<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    tempo <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> MAX_N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        pai<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n        tam<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        his<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> x<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>his<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> t<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>pai<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> u<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> v<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    tempo<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">,</span> tempo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> b <span class=\"token operator\">=</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">,</span> tempo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tam<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> tam<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pai<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> b<span class=\"token punctuation\">;</span>\n    his<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tempo<span class=\"token punctuation\">;</span>\n    tam<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> tam<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"pictionary-gym---102078a\" style=\"position:relative;\"><a href=\"#pictionary-gym---102078a\" aria-label=\"pictionary gym   102078a permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pictionary (Gym - 102078A)</h3>\n<ul>\n<li>Neste problema, temos um conjunto de N cidades, inicialmente todas desconectadas.</li>\n<li>Rodovias sÃ£o construÃ­das entre a cidades em M dias. Em um dia i, Ã© construÃ­da uma estrada entre a e b se gcd(a, b) = M - i + 1.</li>\n<li>SÃ£o feitas Q queries, constituÃ­das por pares de cidades. O resultado de cada query Ã© o nÃºmero mÃ­nimo de dias necessÃ¡rios para conectar o par de cidades (direta ou indiretamente)</li>\n<li>Usaremos disjoint-sets com persistÃªncia parcial para unir as cidades marcando o momento em que as uniÃµes foram feitas.\n<ul>\n<li>Para cada dia d, vamos conectar as cidades com gcd(a, b) = M - d + 1, que vamos chamar de x. Iterando sobre d, vamos realizar um merge de x com todos os seus mÃºltiplos (atÃ© n).</li>\n<li>Mas e se duas cidades (x, k * x) jÃ¡ tiverem sido conectadas indiretamente antes? Sem problemas, o merge vai verificar que as cidades jÃ¡ foram unidas em um momento anterior e nÃ£o vai fazer nada.</li>\n</ul>\n</li>\n<li>Para realizar as queries, executaremos uma busca binÃ¡ria para descobrir o nÃºmero mÃ­nimo de dias necessÃ¡rios para conectar as cidades \"a\" e \"b\".</li>\n</ul>\n<h3 id=\"soluÃ§Ã£o-offline\" style=\"position:relative;\"><a href=\"#solu%C3%A7%C3%A3o-offline\" aria-label=\"soluÃ§Ã£o offline permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SoluÃ§Ã£o Offline</h3>\n<ul>\n<li>Quando lidamos com problemas em que a entrada consiste em uma sequÃªncia de queries, temos dois tipos de soluÃ§Ãµes possÃ­veis:\n<ul>\n<li>Online: cada query Ã© processada no momento em que Ã© lida, antes da leitura da prÃ³xima.</li>\n<li>Offline: todas as queries sÃ£o lidas para sÃ³ depois serem processadas. E este processamento pode ser realizado em uma ordem conveniente, nÃ£o necessariamente na ordem de entrada.\n<ul>\n<li>Ajuda a resolver certos problemas de forma mais eficiente</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"consecutive-letters-spoj--consec\" style=\"position:relative;\"><a href=\"#consecutive-letters-spoj--consec\" aria-label=\"consecutive letters spoj  consec permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Consecutive Letters (SPOJ â€“ CONSEC)</h3>\n<ul>\n<li>Problema: considere uma string S apenas com letras maiÃºsculas. SÃ£o dadas Q queries, e cada query pode ser de dois tipos:\n<ul>\n<li>1 i: encontre o tamanho mÃ¡ximo do segmento [b, e] em que a substring S[b...e] contenha apenas a letra S[i].</li>\n<li>2 i: Troque o caractere no Ã­ndice i por â€˜#â€™</li>\n</ul>\n</li>\n<li>|ğ‘†| â‰¤ 200000</li>\n<li>ğ‘„ â‰¤ 100000</li>\n<li>Uma forma de modelar este problema Ã© utilizando uma DSU, de forma que uma sequÃªncia contÃ­gua de caracteres iguais estejam em um mesmo conjunto.</li>\n<li>O problema Ã© que a segunda query representa uma possÃ­vel cisÃ£o de um destes conjuntos, e a DSU permite realizar uniÃµes de conjuntos, mas nÃ£o separaÃ§Ãµes.</li>\n<li>PorÃ©m, uma soluÃ§Ã£o offline pode resolver este problema.</li>\n<li>Basta ler todas as queries e processÃ¡-las na ordem inversa. Dessa forma iniciamos com a string jÃ¡ alterada, com todas as substituiÃ§Ãµes por â€˜#â€™ jÃ¡ realizadas, e vamos realizando as operaÃ§Ãµes de trÃ¡s para frente.\n<ul>\n<li>1 i: imprimimos o tamanho do conjunto a qual a posiÃ§Ã£o i faz parte</li>\n<li>2 i: voltamos o caractere original da posiÃ§Ã£o i, e entÃ£o:\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">S[i] == S[i-1] â†’ merge(i, i-1)\nS[i] == S[i+1] â†’ merge(i, i+1)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"referÃªncias\" style=\"position:relative;\"><a href=\"#refer%C3%AAncias\" aria-label=\"referÃªncias permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ReferÃªncias</h3>\n<p><a href=\"https://files.johnjq.com/slides/summer/union-find.pdf\">https://files.johnjq.com/slides/summer/union-find.pdf</a></p>\n<p><a href=\"https://github.com/icmcgema/gema/blob/master/XX-Union_Find.md\">https://github.com/icmcgema/gema/blob/master/XX-Union_Find.md</a></p>\n<p><a href=\"https://cp-algorithms.com/data_structures/disjoint_set_union.html\">https://cp-algorithms.com/data_structures/disjoint_set_union.html</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=E33jZUw2l9Q\">https://www.youtube.com/watch?v=E33jZUw2l9Q</a></p>"}},"pageContext":{"id":"1b5003f8-0f6e-5546-b11d-8db1efe0e8b4","frontmatter__slug":"disjoint-set-union-find","__params":{"frontmatter__slug":"disjoint-set-union-find"}}},"staticQueryHashes":["3159585216"],"slicesMap":{}}